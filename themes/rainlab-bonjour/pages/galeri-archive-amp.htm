title = "Gallery Archive AMP"
url = "/amp/perusahaan-kami/galeri-foto/year/:slug/:page?|^[0-9]+$"
layout = "basic-amp"
is_hidden = 0

[viewBag]
localeUrl[en] = "/gallery-archive"

[builderList]
modelClass = "Definite\Gallery\Models\Post"
scope = "scopeArchiveAmp"
scopeValue = "{{ :scope }}"
displayColumn = "title"
noRecordsMessage = "No records found"
detailsPage = "-"
detailsUrlParameter = "id"
recordsPerPage = 12
pageNumber = "{{ :page }}"
sortColumn = "published_date"
sortDirection = "desc"
==
<?php
function onEnd() {

    // get the post component
    $this->page->title = "Arsip Galeri Foto";
    $this->page->title_en = "Gallery Archive";

    $this->page->year = $this->controller->getRouter()->getParameters()['slug'];
    $this->page->meta_description = "Lihat foto-foto terbaik dari arsip galeri Frisian Flag di tahun ".$this->page->year.". Mulai dari Gerakan Nusantara, Consumer, Dairy Development, dan Drink Move Be Strong!";

    $records = $this->page->components["builderList"]->records;

    $num_pgn = 5;
    $space_pgn = 2;

    $this->page->max_p = $records->currentPage() <=  $space_pgn ? $num_pgn : $records->currentPage() + $space_pgn;

    if( $this->page->max_p > $records->lastPage() ){
        $this->page->max_p = $records->lastPage();
    }

    $this->page->min_p = $this->page->max_p - ($num_pgn - 1);
    if( $this->page->min_p < 1 ) $this->page->min_p = 1;
}
?>
==
{% set records = builderList.records %}
{% set displayColumn = builderList.displayColumn %}
{% set noRecordsMessage = builderList.noRecordsMessage %}
{% set detailsPage = builderList.detailsPage %}
{% set detailsKeyColumn = builderList.detailsKeyColumn %}
{% set detailsUrlParameter = builderList.detailsUrlParameter %}

<div class="cover">
    <amp-img 
        src="{{ 'assets/img/95-TAHUN-FF_mobile-banner.jpg'|theme }}"
        srcset="{{ 'assets/img/95-TAHUN-FF_mobile-banner.jpg'|theme }} 640w,
               {{ 'assets/img/95-TAHUN-FF_mobile-banner.jpg'|theme }} 320w"
        width="50"
        height="50"
        layout="responsive"
        alt="an image">
    </amp-img>
</div>

<amp-accordion class="title_home">
    <section>
        <h4 class="arrow_down"><a href="#" target="_self">{{'galeri-foto'|_}}</a></h4>
        <p>
          <a href="{{'about-us'|page}}" target="_self">{{'tentang-kami'|_}}</a>
          <a href="{{'news-amp'|page}}" target="_self">{{'berita'|_}}</a>
          <a href="{{'galeri-amp'|page}}" target="_self">{{'galeri-foto'|_}}</a>
          <a href="{{'press-release-amp'|page}}" target="_self">{{'siaran-pers'|_}}</a>
          <a href="{{'our-purposes-amp'|page}}" target="_self">{{'tujuan-kami'|_}}</a>
        </p>
    </section>
</amp-accordion>

<div class="breadcrumb">
    <a href="{{ 'home'|page }}">{{'beranda'|_}}</a> /
    <a href="{{'galeri-amp'|_}}">{{'galeri-foto'|_}}</a>
</div>

<div class="detail_text">

<h1>{{'galeri-foto'|_}}</h1>
<form action-xhr="#" method="post" target="_blank" class="search_plain">
  <input type="text" placeholder="Search">
</form>
<br>
  <amp-accordion class="title_home">
  <section>
    <h4 class="arrow_down"><a href="#" target="_self">{{ this.page.year ?? 'All'  }}</a></h4>
    <p>
        <a href="{{url('galeri-amp'|page ({"page":null})) }}" target="_self">All</a>
        {% for years in records.first.year  %}
        <a href="{{url('galeri-archive-amp'|page ({"slug":years.published_date, "page":null})) }}">{{ years.published_date }}</a>
        {% endfor %}
    </p>
  </section>
</amp-accordion>
</div>

{% for record in records  %}
<!-- s:section list -->
<a href="{{ url('galeri-single-amp'|page ({"slug":record.slug})) }}" target="_self">
  <div class="list_galeri">
      <div class="img" style="background:url('{{ record.poster.path ?? 'assets/img/our-milkpedia.png' | theme }}');">
      </div>
      <div class="text">
        <h3>Gambar Menjadi Background</h3>
      </div>
      <div class="clearfix"></div>
  </div>
</a>
{% else %}
  <li class="no-data">{{ noRecordsMessage }}</li>
{% endfor %}

<div class="stylepaging">
  {% if records.lastPage > 1 %}
  <ul>
    {% if records.currentPage > 1 %}
    <li><a href="{{ this.page.baseFileName|page({ (pageParam): (records.currentPage-1) }) }}" class="{{ records.currentPage() == 1 ? 'disable' : null }}">&laquo;</a></li>
    {% endif %}
    {% for page in this.page.min_p..this.page.max_p %}
    <li><a href="{{ this.page.baseFileName|page({ (pageParam): page }) }}" class="{{ records.currentPage == page ? 'disable' : null }}">{{ page }}</a></li>
    {% endfor %}
    {% if records.lastPage > records.currentPage %}
    <li><a href="{{ this.page.baseFileName|page({ (pageParam): (records.currentPage+1) }) }}">&raquo;</a></li>
    {% endif %}
  </ul>
  {% endif %}
  <div class="paging-info">{{ 'halaman'|_ }} {{records.currentPage}} {{ 'dari'|_ }} {{records.lastPage}}</div>
</div>